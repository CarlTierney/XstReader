@using XstReader
@using XstReader.App.Common
@using XstReader.ElementProperties
@using XstReader.Razor.Templates

@model XstMessage

@{
    XstMessage Message = Model;
    XstExportOptions Options = RenderOptions.ExportOptions;

    if (!ViewData.ContainsKey("Level"))
        ViewData.Add("Level", 1);

    int level = (ViewData["Level"] as int?) ?? 0;
    if (level == 0) level = 1;
}

@functions
{
    ViewDataDictionary GetDictionary(int innerLevel)
    {
        var dic = new ViewDataDictionary(ViewData);
        dic["Level"] = innerLevel;
        return dic;
    }

}

@* Message *@
@Html.Raw($"<H{level}>Message</H{level}>")

<details>
    <summary>
        <b>Properties</b>
    </summary>
    <p>
        @{
            Html.RenderPartial("XstPropertySetView_Properties", Message.Properties, GetDictionary(level + 1));
        }
    </p>
</details>
@{
}

